# 本地贾维斯系统开发计划

## 项目概述

本项目致力于构建一个本地化的贾维斯系统，基于Letta平台，具备持续记忆、个性化服务和智能任务执行能力。项目专注于两个主要增强方向：

1. 国内模型深度集成
2. MCP工具生态系统扩展

## 整体开发计划

### 第一阶段：国内模型兼容性增强 (1-2周)

#### 任务1: 完善国内模型提供商支持
- **状态**: 已完成
- **已完成**:
  - 在 ProviderType 枚举中添加 Kimi 和 Zhipu 类型
  - 在 LLMClient 工厂方法中添加 Kimi 和 Zhipu 支持
  - 在 ModelSettings 中添加 kimi_base_url 和 zhipu_base_url 配置
  - 实现完整的模型列表获取功能 (KimiProvider 和 ZhipuProvider 类)

#### 任务2: 添加更多国内模型支持
- **状态**: 未开始
- **计划**:
  - 实现通义千问(Qwen)支持
  - 实现文心一言(ERNIE Bot)支持
  - 实现百川(Baichuan)支持

#### 任务3: 网络优化和错误处理
- **状态**: 未开始
- **计划**:
  - 实现国内网络环境下的重试机制
  - 添加超时和错误处理优化
  - 实现模型调用的缓存机制

### 第二阶段：MCP工具生态系统扩展 (2-3周)

#### 任务1: 丰富内置MCP工具
- **状态**: 部分完成
- **已完成**:
  - 开发文件系统操作工具集
  - 开发网络搜索工具集
- **待完成**:
  - 开发代码执行工具集
  - 开发本地应用控制工具集

#### 任务2: 自定义MCP工具开发框架
- **状态**: 未开始
- **计划**:
  - 创建MCP工具模板生成器
  - 实现工具自动注册机制
  - 开发工具测试框架

#### 任务3: 工具管理界面
- **状态**: 未开始
- **计划**:
  - 实现MCP工具的可视化管理界面
  - 提供工具配置和测试功能
  - 实现工具版本管理

### 第三阶段：本地贾维斯功能开发 (3-4周)

#### 任务1: 记忆增强模块
- **状态**: 未开始
- **计划**:
  - 实现个人偏好学习模块
  - 开发习惯模式识别模块
  - 实现长期记忆优化模块

#### 任务2: 本地工具开发
- **状态**: 未开始
- **计划**:
  - 开发系统控制工具
  - 实现文件管理工具
  - 开发应用集成工具

#### 任务3: 离线功能实现
- **状态**: 未开始
- **计划**:
  - 实现本地向量数据库
  - 开发离线索引构建机制
  - 支持离线模型运行

### 第四阶段：系统集成和优化 (1-2周)

#### 任务1: 系统集成测试
- **状态**: 未开始
- **计划**:
  - 进行端到端集成测试
  - 优化系统性能
  - 修复发现的问题

#### 任务2: 用户体验优化
- **状态**: 未开始
- **计划**:
  - 优化交互界面
  - 提供使用文档和示例
  - 实现配置向导

#### 任务3: 部署和发布准备
- **状态**: 未开始
- **计划**:
  - 准备部署文档
  - 创建安装脚本
  - 准备发布版本

## 发布计划

### Alpha版本 (第4周)
- **目标**: 核心功能可用，基础国内模型支持
- **包含功能**:
  - Kimi和Zhipu AI模型支持
  - 基础MCP工具集（文件操作、时间获取、网络搜索）
  - 基本的Letta代理功能
  - 完整的模型列表获取功能
- **目标用户**: 开发者和早期测试用户
- **发布渠道**: GitHub Releases

### Beta版本 (第8周)
- **目标**: 功能完整，稳定性提升
- **包含功能**:
  - 完整的国内模型支持（Qwen、ERNIE Bot等）
  - 丰富的MCP工具生态系统
  - 记忆增强模块
  - 离线功能支持
- **目标用户**: 公开测试用户
- **发布渠道**: GitHub Releases, Docker Hub

### 正式版本 (第10周)
- **目标**: 生产就绪，文档完善
- **包含功能**:
  - 所有计划功能
  - 完整的文档和示例
  - 可视化管理界面
  - 性能优化和错误处理
- **目标用户**: 所有用户
- **发布渠道**: GitHub Releases, Docker Hub, PyPI

## 部署文档

### 系统要求
- Python 3.11+
- uv包管理器
- PostgreSQL (可选，用于持久化存储)
- Docker (可选，用于容器化部署)

### 安装步骤
1. 克隆项目仓库
2. 安装依赖: `uv sync --all-extras`
3. 配置环境变量 (API密钥等)
4. 启动服务: `uv run letta server`

### 配置说明
- `.env` 文件包含所有必要的配置项
- 支持通过环境变量覆盖配置
- 提供Docker Compose配置用于容器化部署

## 安装脚本

### Windows安装脚本
```batch
@echo off
echo 🚀 开始安装本地贾维斯系统...

REM 检查是否已安装uv
where uv >nul 2>&1
if %errorlevel% neq 0 (
    echo ❌ 未找到uv，正在安装...
    powershell -Command "irm https://astral.sh/uv/install.ps1 | iex"
    echo ✅ uv安装完成
) else (
    echo ✅ 已安装uv
)

REM 安装项目依赖
echo 📦 安装项目依赖...
uv sync --all-extras

REM 检查.env文件
if not exist .env (
    echo 📝 创建.env配置文件...
    if exist .env.example (
        copy .env.example .env
    ) else (
        echo # 本地贾维斯系统配置文件 > .env
    )
    echo 请编辑.env文件添加您的API密钥
)

echo ✅ 安装完成！
echo 使用以下命令启动服务：
echo uv run letta server

pause
```

### Unix/Linux安装脚本
```bash
#!/bin/bash
echo "🚀 开始安装本地贾维斯系统..."

# 检查是否已安装uv
if ! command -v uv &> /dev/null
then
    echo "❌ 未找到uv，正在安装..."
    curl -LsSf https://astral.sh/uv/install.sh | sh
    echo "✅ uv安装完成"
else
    echo "✅ 已安装uv"
fi

# 安装项目依赖
echo "📦 安装项目依赖..."
uv sync --all-extras

# 检查.env文件
if [ ! -f .env ]; then
    echo "📝 创建.env配置文件..."
    if [ -f .env.example ]; then
        cp .env.example .env
    else
        echo "# 本地贾维斯系统配置文件" > .env
    fi
    echo "请编辑.env文件添加您的API密钥"
fi

echo "✅ 安装完成！"
echo "使用以下命令启动服务："
echo "uv run letta server"
```

## 版本管理

### 版本号格式
采用语义化版本控制 (SemVer): `主版本号.次版本号.修订号`

### 分支策略
- `main`: 稳定版本分支
- `develop`: 开发版本分支
- `feature/*`: 功能开发分支
- `hotfix/*`: 紧急修复分支

### 发布流程
1. 在GitHub上创建Release
2. 打标签并生成发布说明
3. 构建Docker镜像并推送到Docker Hub
4. 发布到PyPI (如果适用)
5. 更新文档和示例

## 社区和贡献

### 贡献指南
- 遵循项目的代码风格和规范
- 提交Pull Request前进行充分测试
- 提供清晰的提交信息和变更说明

### 问题反馈
- 使用GitHub Issues报告问题
- 提供详细的环境信息和复现步骤
- 标记问题的优先级和类型

### 社区支持
- 提供Discord或Slack频道用于社区交流
- 定期举办在线问答和分享会
- 维护FAQ和Troubleshooting文档

## 下一步开发计划

### 近期目标 (1-2周)
1. **完善国内模型支持**:
   - 实现通义千问(Qwen)支持
   - 实现文心一言(ERNIE Bot)支持
   - 优化模型切换和配置管理

2. **增强MCP工具生态系统**:
   - 开发代码执行工具集
   - 创建MCP工具模板生成器
   - 实现工具自动注册机制

3. **性能优化**:
   - 实现国内网络环境下的重试机制
   - 添加超时和错误处理优化
   - 实现模型调用的缓存机制

### 中期目标 (3-4周)
1. **记忆增强模块**:
   - 实现个人偏好学习模块
   - 开发习惯模式识别模块
   - 实现长期记忆优化模块

2. **本地工具开发**:
   - 开发系统控制工具
   - 实现文件管理工具
   - 开发应用集成工具

3. **离线功能实现**:
   - 实现本地向量数据库
   - 开发离线索引构建机制
   - 支持离线模型运行

### 长期目标 (5-8周)
1. **用户体验优化**:
   - 优化交互界面
   - 提供完整的使用文档和示例
   - 实现配置向导

2. **系统集成和测试**:
   - 进行端到端集成测试
   - 优化系统性能
   - 修复发现的问题

3. **部署和发布准备**:
   - 准备完整的部署文档
   - 创建一键安装脚本
   - 准备正式发布版本